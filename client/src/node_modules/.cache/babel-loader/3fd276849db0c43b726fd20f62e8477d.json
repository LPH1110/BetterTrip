{"ast":null,"code":"var _jsxFileName = \"D:\\\\BetterTrip-main\\\\client\\\\src\\\\pages\\\\Login\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { ErrorMessage, Field, Form, Formik } from 'formik';\nimport { useRef, useState, createRef } from 'react';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport * as Yup from 'yup';\nimport { actions, useStore } from \"../../store\";\nimport { Image, Toast } from \"../../components\";\nimport images from \"../../assets/images\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const navigate = useNavigate();\n  const toastRef = /*#__PURE__*/createRef();\n  const [showToast, setShowToast] = useState(false);\n  const [toastBody, setToastBody] = useState({\n    message: '',\n    status: 'default'\n  });\n  const [, dispatch] = useStore();\n  const authenForm = useRef();\n  const initialValues = {\n    email: '',\n    password: ''\n  };\n  const validationSchema = Yup.object().shape({\n    email: Yup.string().email().required(),\n    password: Yup.string().min(8).required()\n  });\n\n  const handleSubmit = async data => {\n    try {\n      const res = await axios.post('http://localhost:3001/auth/login', data);\n      const {\n        error\n      } = res.data;\n      setShowToast(true);\n      setTimeout(() => {\n        setShowToast(false);\n      }, 2000);\n\n      if (!error) {\n        setToastBody({\n          message: 'Logged in successfully!',\n          status: 'success'\n        });\n        const {\n          accessToken\n        } = res.data;\n        localStorage.setItem('accessToken', accessToken);\n        dispatch(actions.setUserSession(res.data, true));\n        setTimeout(() => {\n          navigate('/');\n        }, 2000);\n      } else {\n        setToastBody({\n          message: error,\n          status: 'error'\n        });\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const handleErrorMessage = (message, name) => {\n    // const inputElement = authenForm.current.querySelector(`[name='${name}']`);\n    // inputElement.classList.add('ring-pink-600');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-pink-600\",\n      children: message.replace(name, 'This field')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 16\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"flex flex-col items-center justify-center h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(NavLink, {\n      end: true,\n      to: \"/\",\n      className: \"mb-8 p-4 max-w-[20rem]\",\n      children: /*#__PURE__*/_jsxDEV(Image, {\n        src: images.logo,\n        alt: \"logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: initialValues,\n      validationSchema: validationSchema,\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        ref: authenForm,\n        className: \"w-full max-w-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"mb-6 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"text-slate-900 font-semibold\",\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            name: \"email\",\n            type: \"email\",\n            className: \"mt-[0.64rem] px-3 py-2 focus:outline-none ring-1 ring-slate-200 focus:ring-2 focus:ring-sky-400 shadow-sm rounded-md\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            name: \"email\",\n            children: message => handleErrorMessage(message, 'email')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"mb-6 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            className: \"text-slate-900 font-semibold\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            name: \"password\",\n            type: \"password\",\n            className: \"mt-[0.64rem] px-3 py-2 focus:outline-none ring-1 ring-slate-200 focus:ring-2 focus:ring-sky-400 shadow-sm rounded-md\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            name: \"password\",\n            children: message => handleErrorMessage(message, 'password')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"inline-flex justify-center items-center w-full px-4 py-3.5 mt-8 font-semibold rounded-lg text-white bg-slate-900 hover:bg-slate-700\",\n          children: \"Sign in to account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"p-4 mt-8\",\n      children: [\"Having no account?\", ' ', /*#__PURE__*/_jsxDEV(NavLink, {\n        to: \"/signup\",\n        className: \"hover:underline hover:underline-offset-4 ml-1 text-sky-500\",\n        children: \"Create a new one!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), showToast && /*#__PURE__*/_jsxDEV(Toast, {\n      ref: toastRef,\n      message: toastBody.message,\n      status: toastBody.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"Ax6ZMhmVpGximnuUivDtGE/DrZk=\", false, function () {\n  return [useNavigate, useStore];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["axios","ErrorMessage","Field","Form","Formik","useRef","useState","createRef","NavLink","useNavigate","Yup","actions","useStore","Image","Toast","images","Login","navigate","toastRef","showToast","setShowToast","toastBody","setToastBody","message","status","dispatch","authenForm","initialValues","email","password","validationSchema","object","shape","string","required","min","handleSubmit","data","res","post","error","setTimeout","accessToken","localStorage","setItem","setUserSession","e","console","handleErrorMessage","name","replace","logo"],"sources":["D:/BetterTrip-main/client/src/pages/Login/Login.js"],"sourcesContent":["import axios from 'axios';\nimport { ErrorMessage, Field, Form, Formik } from 'formik';\nimport { useRef, useState, createRef } from 'react';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport * as Yup from 'yup';\nimport { actions, useStore } from '~/store';\nimport { Image, Toast } from '~/components';\nimport images from '~/assets/images';\n\nfunction Login() {\n    const navigate = useNavigate();\n    const toastRef = createRef();\n    const [showToast, setShowToast] = useState(false);\n    const [toastBody, setToastBody] = useState({\n        message: '',\n        status: 'default',\n    });\n    const [, dispatch] = useStore();\n\n    const authenForm = useRef();\n\n    const initialValues = {\n        email: '',\n        password: '',\n    };\n\n    const validationSchema = Yup.object().shape({\n        email: Yup.string().email().required(),\n        password: Yup.string().min(8).required(),\n    });\n\n    const handleSubmit = async (data) => {\n        try {\n            const res = await axios.post('http://localhost:3001/auth/login', data);\n            const { error } = res.data;\n            setShowToast(true);\n            setTimeout(() => {\n                setShowToast(false);\n            }, 2000);\n\n            if (!error) {\n                setToastBody({ message: 'Logged in successfully!', status: 'success' });\n                const { accessToken } = res.data;\n                localStorage.setItem('accessToken', accessToken);\n                dispatch(actions.setUserSession(res.data, true));\n\n                setTimeout(() => {\n                    navigate('/');\n                }, 2000);\n            } else {\n                setToastBody({ message: error, status: 'error' });\n            }\n        } catch (e) {\n            console.error(e);\n        }\n    };\n\n    const handleErrorMessage = (message, name) => {\n        // const inputElement = authenForm.current.querySelector(`[name='${name}']`);\n        // inputElement.classList.add('ring-pink-600');\n        return <div className=\"text-pink-600\">{message.replace(name, 'This field')}</div>;\n    };\n\n    return (\n        <section className=\"flex flex-col items-center justify-center h-screen\">\n            <NavLink end to=\"/\" className=\"mb-8 p-4 max-w-[20rem]\">\n                <Image src={images.logo} alt=\"logo\" />\n            </NavLink>\n            <Formik initialValues={initialValues} validationSchema={validationSchema} onSubmit={handleSubmit}>\n                <Form ref={authenForm} className=\"w-full max-w-lg\">\n                    <section className=\"mb-6 flex flex-col\">\n                        <label htmlFor=\"email\" className=\"text-slate-900 font-semibold\">\n                            Email address\n                        </label>\n                        <Field\n                            name=\"email\"\n                            type=\"email\"\n                            className=\"mt-[0.64rem] px-3 py-2 focus:outline-none ring-1 ring-slate-200 focus:ring-2 focus:ring-sky-400 shadow-sm rounded-md\"\n                        />\n                        <ErrorMessage name=\"email\">{(message) => handleErrorMessage(message, 'email')}</ErrorMessage>\n                    </section>\n                    <section className=\"mb-6 flex flex-col\">\n                        <label htmlFor=\"password\" className=\"text-slate-900 font-semibold\">\n                            Password\n                        </label>\n                        <Field\n                            name=\"password\"\n                            type=\"password\"\n                            className=\"mt-[0.64rem] px-3 py-2 focus:outline-none ring-1 ring-slate-200 focus:ring-2 focus:ring-sky-400 shadow-sm rounded-md\"\n                        />\n                        <ErrorMessage name=\"password\">\n                            {(message) => handleErrorMessage(message, 'password')}\n                        </ErrorMessage>\n                    </section>\n                    <button\n                        type=\"submit\"\n                        className=\"inline-flex justify-center items-center w-full px-4 py-3.5 mt-8 font-semibold rounded-lg text-white bg-slate-900 hover:bg-slate-700\"\n                    >\n                        Sign in to account\n                    </button>\n                </Form>\n            </Formik>\n            <p className=\"p-4 mt-8\">\n                Having no account?{' '}\n                <NavLink to=\"/signup\" className=\"hover:underline hover:underline-offset-4 ml-1 text-sky-500\">\n                    Create a new one!\n                </NavLink>\n            </p>\n            {showToast && <Toast ref={toastRef} message={toastBody.message} status={toastBody.status} />}\n        </section>\n    );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}