{"ast":null,"code":"var _jsxFileName = \"D:\\\\BetterTrip-main\\\\client\\\\src\\\\components\\\\Menu\\\\Menu.js\",\n    _s = $RefreshSig$();\n\nimport classNames from 'classnames/bind';\nimport Tippy from '@tippyjs/react/headless';\nimport { Popper as PopperWrapper } from \"./..\";\nimport { useState } from 'react';\nimport styles from \"./Menu.module.scss\";\nimport MenuItem from \"./MenuItem\";\nimport Header from \"./Header\";\nimport { useStore, actions } from \"../../store\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cx = classNames.bind(styles);\n\nfunction Menu(_ref) {\n  _s();\n\n  let {\n    items,\n    children,\n    hideOnClick = false,\n    onChange\n  } = _ref;\n  const [history, setHistory] = useState([{\n    data: items\n  }]);\n  const current = history[history.length - 1];\n  const [state, dispatch] = useStore();\n\n  const handleResetMenu = () => {\n    // Go back to previous menu\n    setHistory(prev => prev.slice(0, prev.length - 1));\n  };\n\n  const handleHideMenu = () => {\n    // document.body.style.overflowY = 'overlay';\n    // Go back to the first menu\n    setHistory(prev => prev.slice(0, 1));\n  };\n\n  const renderItems = () => {\n    return current.data.map(item => {\n      const hasChildren = !!item.children;\n      return /*#__PURE__*/_jsxDEV(MenuItem, {\n        data: item,\n        onClick: () => {\n          if (hasChildren) {\n            document.body.style.overflowY = 'hidden';\n            setHistory(prev => [...prev, item.children]);\n          } // else {\n          //     onChange(item);\n          // }\n\n\n          switch (item.action) {\n            case 'LOG_OUT':\n              dispatch(actions.setUserSession({}, false));\n              localStorage.removeItem('accessToken');\n\n            default:\n              break;\n          }\n        }\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }, this);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Tippy, {\n    interactive: true,\n    offset: [12, 8],\n    trigger: \"click\",\n    placement: \"bottom-end\",\n    hideOnClick: hideOnClick,\n    onHide: handleHideMenu,\n    render: attrs => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: cx('menu-list'),\n      tabIndex: \"-1\",\n      ...attrs,\n      children: /*#__PURE__*/_jsxDEV(PopperWrapper, {\n        className: cx('menu-popper'),\n        children: [history.length > 1 && /*#__PURE__*/_jsxDEV(Header, {\n          heading: current.title,\n          onBack: handleResetMenu\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 48\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: cx('menu-body'),\n          children: renderItems()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this),\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Menu, \"IBOge/k1GfFXI5Ox5RDJMx6unxo=\", false, function () {\n  return [useStore];\n});\n\n_c = Menu;\nexport default Menu;\n\nvar _c;\n\n$RefreshReg$(_c, \"Menu\");","map":{"version":3,"names":["classNames","Tippy","Popper","PopperWrapper","useState","styles","MenuItem","Header","useStore","actions","cx","bind","Menu","items","children","hideOnClick","onChange","history","setHistory","data","current","length","state","dispatch","handleResetMenu","prev","slice","handleHideMenu","renderItems","map","item","hasChildren","document","body","style","overflowY","action","setUserSession","localStorage","removeItem","id","attrs","title"],"sources":["D:/BetterTrip-main/client/src/components/Menu/Menu.js"],"sourcesContent":["import classNames from 'classnames/bind';\nimport Tippy from '@tippyjs/react/headless';\nimport { Popper as PopperWrapper } from '~/components';\nimport { useState } from 'react';\n\nimport styles from './Menu.module.scss';\nimport MenuItem from './MenuItem';\nimport Header from './Header';\nimport { useStore, actions } from '~/store';\n\nconst cx = classNames.bind(styles);\n\nfunction Menu({ items, children, hideOnClick = false, onChange }) {\n    const [history, setHistory] = useState([{ data: items }]);\n    const current = history[history.length - 1];\n    const [state, dispatch] = useStore();\n\n    const handleResetMenu = () => {\n        // Go back to previous menu\n        setHistory((prev) => prev.slice(0, prev.length - 1));\n    };\n\n    const handleHideMenu = () => {\n        // document.body.style.overflowY = 'overlay';\n        // Go back to the first menu\n        setHistory((prev) => prev.slice(0, 1));\n    };\n\n    const renderItems = () => {\n        return current.data.map((item) => {\n            const hasChildren = !!item.children;\n\n            return (\n                <MenuItem\n                    data={item}\n                    key={item.id}\n                    onClick={() => {\n                        if (hasChildren) {\n                            document.body.style.overflowY = 'hidden';\n                            setHistory((prev) => [...prev, item.children]);\n                        }\n\n                        // else {\n                        //     onChange(item);\n                        // }\n\n                        switch (item.action) {\n                            case 'LOG_OUT':\n                                dispatch(actions.setUserSession({}, false));\n                                localStorage.removeItem('accessToken');\n                            default:\n                                break;\n                        }\n                    }}\n                ></MenuItem>\n            );\n        });\n    };\n    return (\n        <Tippy\n            interactive\n            offset={[12, 8]}\n            trigger=\"click\"\n            placement=\"bottom-end\"\n            hideOnClick={hideOnClick}\n            onHide={handleHideMenu}\n            render={(attrs) => (\n                <div className={cx('menu-list')} tabIndex=\"-1\" {...attrs}>\n                    <PopperWrapper className={cx('menu-popper')}>\n                        {history.length > 1 && <Header heading={current.title} onBack={handleResetMenu} />}\n                        <div className={cx('menu-body')}>{renderItems()}</div>\n                    </PopperWrapper>\n                </div>\n            )}\n        >\n            {children}\n        </Tippy>\n    );\n}\n\nexport default Menu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}